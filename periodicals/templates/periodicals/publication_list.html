{% extends "periodicals/base.html" %}
{% load periodicals_tags %}

{% block title %}Explore{% endblock %}

{% block meta_title %}Publications | Explore{% endblock %}

{% block breadcrumbs %}
    <li><a href="/">Home</a></li>
    <li>Explore</li>
{% endblock %}

{% block main %}
<div data-equalizer>
    <div class="row small-up-2 medium-up-3 large-up-5" data-equalizer="cards" data-equalize-by-row="true" data-equalize-on="medium">
        {% for publication in publications %}
        <div class="column column-block">
            <div class="card" data-equalizer-watch="cards">
                <a href="{{ publication.url }}">
                    <div class="card-divider">
                        <h2>{{ publication }}</h2>
                    </div>
                    <!-- ** Add Publication image here ** <img src="http://127.0.0.1:8000/static/media/periodicals/119-MOB-1858-03-20-001-SINGLE/Ar0090100.png"> -->
                    <div class="card-section">
                        {% with year_span=publication.get_year_span %}
                            <h3>{{ year_span.0 }} to {{ year_span.1 }}</h3>
                        {% endwith %}
                        {% with number_of_years=publication.get_number_of_years %}
                            <h3><strong>{{ number_of_years }}</strong> Year{{ number_of_years|pluralize }}</h3>
                        {% endwith %}
                        <div class="card-footer">
                            {{ publication.issues.count }} Issues spanning {{ publication.get_total_number_of_pages }} pages
                        </div>
                    </div>
                </a>
                {% if request.user.is_staff %}
                <div class="card-divider">
                    <a href="/admin/periodicals/publication/{{ publication.id }}/change/" class="card-footer-item">Edit</a>
                </div>
                {% endif %}
            </div>
        </div>
        {% endfor %}
    </div>
</div>
{% endblock %}